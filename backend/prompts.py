class PromptTemplate:
    def __init__(self, template_type=None):
        self.prompts = []
        self.template_type = template_type
        self.template = {}
        self.order = []
        
    def add(self, prompt):
        self.prompts.append(prompt)
        self.order.append(("prompt", len(self.prompts) - 1))

    def __setitem__(self, key, value):
        self.template[key] = value
        self.order.append(("template", key))

    def __getitem__(self, key):
        return self.template.get(key, None)

    def compile(self):
        parts = []
        for item_type, item in self.order:
            if item_type == "template" and self.template[item]:
                parts.append(f"# {item.upper()} #\n{self.template[item]}\n")
            elif item_type == "prompt":
                parts.append(self.prompts[item])
        return "".join(parts)
    

'''
定义：预留slots：
{text_content}：单篇课文内容
{text_set}：多篇课文内容
{case_content}：单个case
{case_set}：多个cases内容
{analysed_case_set}：已分析的cases的内容
{selected_case}：已选择的case
{selected_text_set_with_analysis}：已选择的多篇课文
'''

'''
case_analysis_prompt
'''
task_context = "我是一名小学语文教师，需要你帮忙完成语文阅读‘阅读情境设计’相关的工作。\
这项工作的内容是：结合提供的情境或主题，将固定的单元课文或其它部分（如，习作部分）的内容串联起来，\
一定要保证紧扣大主题、大情境贯穿整个单元，其他内容可以自由地有创意地创作。"
ta = theme_agent = PromptTemplate()
ta["context"] = task_context
ta["objective"] = "下面，请你帮助我完成第一项工作：请你在课文集中选择合适的结合课文(3-5篇)，发散思维，创造性地逐步分析和解读情境，为教师创造性地提供结合点。不需提供指导学生的信息。"
ta["require"] = "遵守以下规则：1.你先要完整地阐述场景标题地定义，然后找到3-4个结合点。你的重点是在于详细地、逐步地解读和分析情境或主题，你归纳出的场景不一定要和我提供的情境的原始名称一致，可以根据与课文的联系调整；2.结合的课文名称需要在第二行提及；尽可能不要在分析中提及任何具体的课文标题和内容！3.语文园地、习作、阅读链接等内容不要进行结合分析。"
ta["style"] = "写给小学教师的风格。"
ta["tone"] = "说服性的。"
ta["audience"] = "小学六年级语文老师。"
ta["response"] = "有逻辑地输出，详细地阐述场景的内涵。"
ta["length"] = "200字左右。"
ta["format"] = '''## 归纳的case名称
## 相关课文1, 相关课文2, ..., 相关课文n
## 对情境的具体分析……（写成一段话）
'''
ta["format example"] = '''## 文化自信
## 开国大典, 七律·长征, 多彩的活动
## 文化自信是一个国家、一个民族对本国本民族文化的认同和自豪感。在小学六年级的语文教学中，我们可以通过课文的串联，让学生在理解课文内容的基础上，感受到中华文化的伟大，从而激发他们的文化自信。从神话故事中探索文化自信渊源、从古诗词中树立文化自信的渊源，从革命精神中升华文化自信的情感。
'''
ta["format tips"] = "请参考format example的格式来进行生成，不要包含其他额外的描述！如example所示，在对情境的具体分析中，并没有提到任何关于示例文章的内容。"
ta.add("以下是可选课文，你不能选择超过我提供的课文范围外的任何课文：{text_set}")
ta.add("以下是可选情境，你不能选择超过我提供的范围外的任何情境：{case}")
ta["tips"] = "所有相关课文的标题必须是我为你提供了全文的课文的标题（序号后的标题），不能包含任何其他的文章！！！同样的，请你不能包含任何课文范围外的任何场景！！！请注意，你必须按照fortmat要求加上## ，这对我们排版很重要，请注意，对情境的具体分析开始前也要加上## "
case_analysis_prompt = ta.compile()


'''
case_analysis_prompt_for_traditional_subjects
'''
task_context = "我是一名小学语文教师，需要你帮忙完成语文阅读‘跨学科作业设计’相关的工作。\
这项工作的内容是：结合提供的跨学科情境，将固定的单元课文或其它部分（如，习作部分）的内容串联起来，\
一定要保证紧扣整个跨学科情境贯穿整个单元，其他内容可以自由地有创意地创作。"
ta = theme_agent = PromptTemplate()
ta["context"] = task_context
ta["objective"] = "下面，请你帮助我完成第一项工作：请你在课文集中选择合适的结合课文(2-5篇)，发散思维，创造性地逐步分析和解读学科主题，为教师创造性地提供结合点。不需提供指导学生的信息。"
ta["require"] = "遵守以下规则：1.你先要完整地阐述场景标题的定义，然后找到3-4个结合点。你的重点是在于详细地、逐步地解读和分析学科主题，尽可能拓展原来较为狭窄的学科定义，以寻求更多的结合点；2.结合的课文名称需要在第二行提及；尽可能不要在分析中提及任何具体的课文标题和内容！3.语文园地、习作、阅读链接等内容不要进行结合分析。"
ta["style"] = "写给小学教师的风格，富有学科的学科特色。例如，如果科目是“科学”，意味着你的结合点要与科学的思想或者小学科学实验有关系。"
ta["tone"] = "说服性的。"
ta["audience"] = "小学六年级语文和对应学科的老师。"
ta["response"] = "有逻辑地输出，详细地阐述场景的内涵。主题名称未必和我提供给你的跨学科情境的定义名称完全一样，但是科目必须要和我提供的情境的科目保持一致。"
ta["length"] = "200字左右。"
ta["format"] = '''## 归纳的跨学科情境名称
## 相关课文1, 相关课文2, ..., 相关课文n
## 对情境的具体分析……（写成一段话）
'''
ta["format example"] = '''## 会跳舞的小动物们（美术）
## “精彩极了”和“糟糕透了”, 山居秋暝, 枫桥夜泊
## 会跳舞的鸟，这是一个充满想象与创造力的主题。在这个情境中，我们可以从课文中汲取灵感，引导学生探索鸟类的外观，同时培养学生的动手能力和审美情趣。在“精彩极了”和“糟糕透了”中，我们可以看到作者对创作的热情与执着，这正与制作提线木偶的过程相契合，父母对于孩子作品的评论也很值得我们去思考如何多方面评判一个艺术作品。而在“山居秋暝”和“枫桥夜泊”中，诗人对自然景物的细腻描绘，能为学生们提供丰富的想象空间，激发他们创作出独具特色的小鸟木偶。通过对这些课文的深入学习，学生们不仅能够了解小动物的结构、外形与动态特征，还能在创作过程中，体会到艺术创作的乐趣。
'''
ta["format tips"] = "请参考format example的格式来进行生成，不要包含其他额外的描述！如example所示，在对情境的具体分析中，并没有提到任何关于示例文章的内容。"
ta.add("以下是可选课文，你不能选择超过我提供的课文范围外的任何课文：{text_set}")
ta.add("以下是可选情境，你不能选择超过我提供的范围外的任何跨学科情境：{case}")
ta["tips"] = "所有相关课文的标题必须是我为你提供了全文的课文的标题（序号后的标题），不能包含任何其他的文章！！！同样的，请你不能包含任何课文范围外的任何场景！！！请注意，你必须按照fortmat要求加上## ，这对我们排版很重要，请注意，对情境的具体分析开始前也要加上## 。在情境标题后要用括号写明学科——请注意，只有科学、美术、音乐、数学四个学科可供选择。"
case_analysis_prompt_for_subjects = ta.compile()

'''
CaseRanker
'''
pr = paragraph_recommender = PromptTemplate()
pr["context"] = task_context
pr["objective"] = "下面，请你帮助我完成第二项工作：总结出全部课文的主题，根据提供的情境，将给出的情境进行排序，找出一个最适合与这些课文主题结合的情境。"
pr["require"] = "输出遵守以下要求：1.先输出选择的场景，用英文逗号隔开。然后，空两行，依次输出推荐理由；2.请给出排序最高的情境的理由，以及其他情境排序低于第一名的理由。注意是对每个情景或主题进行排序，而不用对具体的结合点进行排序"
pr["audience"] = "小学六年级语文老师。"
pr["response"] = "输出排序结果以及详细有逻辑的分析理由。"
pr["format example"] = '''1, 3, 5

推荐理由1
推荐理由3
推荐理由5

'''
pr["情境列表"] = '{analysed_case_set}'
pr.add("具体的单元课文以及内容如下：{text_set}" )
case_ranker_prompt = pr.compile()


'''
TextAnalysis
'''
pr = paragraph_recommender = PromptTemplate()
pr["context"] = task_context
pr["objective"] = "下面，请你帮助我完成第三项工作：根据确定的情境和指定的课文，找到多篇课文中多个与情境（情境本身和其结合点）有关系的点；生成结合情境的非常具体的分析；并提供适合用做串联引入主题的内容。"
pr["require"] = "你需要按如下格式回答：整篇课文和情境分析（每篇课文的分析至少三条）的关系。重点分析整篇文章的主旨，最后一点请你分析文章中若干个句子与情境的关系。"
# 如果情境来源于科学、数学、美术或音乐这四个学科，要紧贴这个学科的专业知识提供一些和专业学科相关的分析。可以成为额外添加到最后一点，需要指明具体的结合点，越具体越好。"
pr["audience"] = "小学六年级语文老师。"
pr["response"] = "准确的以及更具体的分析。"
pr["format"] = '''课文标题
- 分析点1
- 分析点2
- 分析点3'''
pr["format example"] = '''草原
- 作者通过细腻的描绘，使我们仿佛置身于草原的辽阔与美丽之中。这与“慢游”强调的体验和感受自然景观相契合。
- 主客相聚、蒙汉情深，体现了中国多民族文化的交融和传承。慢游可以让孩子们更深入地体验和了解当地的历史文化。
- 通过对自然景观的细腻描绘，让学生感受自然之美，与“慢游”中强调的体验和感受当地文化、自然环境和人文气息相呼应。'''
pr["details"] = "情境内容是：{selected_case}"
pr.add("课文内容是：" + "{text_content}")
pr["format tips"] = "请按照format example来进行排版，不需要“课文标题”和“分析点”这些字，同时也不用书名号。如果情境来源于一个学科——如科学、数学、美术或音乐，要紧贴这个学科的专业知识提供一些和专业学科相关的分析。可以成为额外添加到最后一点，需要指明具体的结合点，越具体越好。"
text_analysis_prompt = pr.compile()

'''
TextRanker
'''
pr = paragraph_recommender = PromptTemplate()
pr["context"] = task_context
pr["objective"] = "下面，请你帮助我完成第四项工作：根据给定的情境和所提供的单元课文内容，按照重要性和对教学主题的重要性以及教师分析的合理性，为提供的分析结果打分。"
pr["require"] = "请你综合考虑提供的分析结果和主题的贴切度和课文内容本身与主题的贴切度，返回结果，并给出详细的理由。不要随意打分，要有逻辑。分数范围为1-10分。如果选定的情境有明确指出科目，需要分析课文描述与科目之间的联系性。"
pr["audience"] = "小学六年级语文老师。"
pr["response"] = "有逻辑和说服力的打分可以帮助教师选择适合课文教学的情境与结合点。你务必要评价我提供给你的每一篇文章，不能遗漏！！！"
pr["format"] = "返回打分结果，每个项目前用## 和换行分隔，用-分隔分数、课文标题和理由。按照我给你的课文顺序进行打分。"
pr["format requirement"] = '''## 3 - 课文标题1 - 理由
## 5 - 课文标题2 - 理由
## 7 - 课文标题3 - 理由
## 1 - 课文标题4 - 理由
## 4 - 课文标题5 - 理由
'''
pr["format example "] = '''## 8 - 开国大典 - 分析点准确抓住了《开国大典》中展现的传统与现代的结合，体现了新中式风格的核心理念。分析中提到了课文中对天安门广场的布置、群众的热情、仪式的庄严等，这些都是传统文化精髓和现代国家形象结合的具体体现。此外，对文中具体句子和词汇的分析也显示了新中式风格在细节上的追求。
## 7 - 多彩的活动 - 提供的《多彩的活动》的分析能够看到学生在现代生活中对传统文化的热爱和传承，这与新中式风格的理念相吻合。分析中提到了活动中的传统元素，如“祖国在我心中”朗诵会和端午节活动，这些都能体现新中式风格在当代教育中的实践。同时，关注学生动作、语言、神态的细节描写也与新中式风格追求的深入理解相一致。
## 6 - 宇宙生命之谜 - 《宇宙生命之谜》的分析虽然涉及了传统与现代的探索，但与新课情的结合略显薄弱。分析中提到了课文中对宇宙的向往和科学探索，这与新中式风格的传承有一定联系，但未能充分体现新中式风格在现代设计理念上的应用。
## 5 - 书戴嵩画牛 - 对《书戴嵩画牛》的分析较为贴切，指出了画作中体现的传统技艺和审美，以及与现代审美的结合。分析中提到的牧童和处士对艺术的不同理解，也反映了新中式风格中多元审美的理念。但是，分析中对新中式风格的现代演绎部分稍显不足。
## 9 - 少年闰土 - 对《少年闰土》的分析非常深入，不仅看到了课文中的传统农村生活场景，还指出了这些场景在新中式设计中的现代演绎。分析中提到的对自然、土地的情感以及传统农耕文化的生活美学，都是新中式风格想要传达的重要价值观。此段的分析点与新中式风格的理解与传承情境紧密结合，体现了高度的教学分析能力。
'''
pr["details"] = "选定的情境是：{selected_case}"
pr.add("课文原文是：" + "{text_set}")
pr.add("对于上述课文的教师的分析是：" + "{analysed_text_set}")
pr.add("选定的情境是：{selected_case}")
pr["format tips"] = "请记得按照format example来进行格式化，请注意，最前面的数字是分数，不是排名！评价分析可以有好有坏，如果你给了低分，请批判性地进行分析；给了高分，可以表扬。请注意！！！必须是## 分数 - 课文标题 - 理由的形式，不能添加任何额外的字！！！这对我排版很重要。你务必要评价每一篇文章，不能遗漏！！！"
text_ranker_prompt = pr.compile()

'''
CoursePlanner
'''
tpl = PromptTemplate()
tpl["context"] = "我是一名小学语文教师，需要你帮忙完成语文‘跨学科作业设计’相关的工作。\
这项工作的内容是：结合提供的情境或主题，将固定的单元课文或其它部分（如，习作部分）的内容串联起来，\
一定要保证紧扣大主题、大情境贯穿整个单元，其他内容可以自由地有创意地创作。"
tpl["objective"] = "输出内容：\
1. 课程设计：将每个单元的所有课文和情境分类为若干个课段（课段命名要求有诗意：使用四字词语的组合和修辞手法），每个课段中又包含若干篇课文，课文包含若干个课时（每个课时可以是相似多个课文和课本部分的结合）（只能出现课本中的课文，不要出现自编内容），并且一定要简介每个课段与大情境的关联。\
2. 如果情境明确指出来源于以下四个学科——科学、数学、美术或音乐，要紧贴这个学科的专业知识，在其中安排一些专业课。你只需要写明白是这是一堂主题是……的美术（或是其它学科）的课即可，不需要安排具体的活动。\
3. 请确保每篇课文都至少分配到一个课时。总课时数必须为{class_num}。"
tpl["style"] = "写给完全没有接触过这门课的教师的课程计划安排。"
tpl["tone"] = "文章导读。"
tpl["audience"] = "小学六年级的教师。"
tpl["response"] = "增加小学生对这些文章的阅读兴趣，紧密结合主题，同时从整体把握这些文章的内容。"
tpl["format example"] = '''
第一课段：初见此景·情不自禁 
- 《草原》（草原里的自然风光与民族情谊）
第1课时：赏析文中优美语句，感受大草原的美丽风光。
第2课时：感受草原人民的热情和蒙汉之间的深厚情感。

第二课段：又见此景·触动心弦
- 《丁香结》（丁香结里的情思）
第3课时：了解作者由事物引发联想的表达方式，并说出自己的理解。
第4课时：理解丁香结的象征意义，体会作者寄寓在丁香结中的情感。
- 《宿建德江》+《过故人庄》（山水明月中的情思）
第5课时：以《宿建德江》为例，教授学习古诗的方法，并探究“月”意象。
第6课时：想象《宿建德江》《过故人庄》的画面，由“山水”之景悟别样诗情。

第三课段：再见此景·浮想联翩
- 课文5：《花之歌》（人景合一，感悟哲理）
第7课时：感受人变形成“花”后的处世态度和内心理想，从而体会作者积极向上的人生态度。
'''
tpl["request"] = "教师要求，总计安排{class_num}个课时。请你调整课段和每个课段中的课时数以符合需求。情境是：{selected_case}"
tpl.add("课文内容相关的分析是：" + "{selected_analysed_text_set}")
tpl["format tips"] = "请完全按照format example中的格式，但是课段名不一定要选用八个字。请仅返回format example包含的部分，不要有任何额外的内容！！！请注意，format example只是为你提供格式的样例，不要误用里面的课文。"
course_planner_prompt = tpl.compile()

'''
IntroWriter
'''
tpl["context"] = "我是一名小学语文教师，需要你帮忙完成语文‘跨学科作业设计’相关的工作。\
这项工作的内容是：结合提供的情境或主题，将固定的单元课文或其它部分（如，习作部分）的内容串联起来，\
一定要保证紧扣大主题、大情境贯穿整个单元，其他内容可以自由地有创意地创作。"
tpl["objective"] = "输出内容：仅有一个自然段运用多种修辞手法的话，需要课文对大主题和大情境分析。这一部分一定要全文贯穿每一篇课文和情境的关联，将课文内容和大情境紧密联合在一起详细分析，但不要按每篇课文分析，要综合分析。语段中结合的课文顺序建议参考教师的课程计划。\
如果情境来源于一个学科——如科学、数学、美术或音乐，要紧贴这个学科的专业知识提供一些和专业学科相关的分析，穿插在介绍中。这些学科的知识我希望更加专业化，而不是单纯从文学的角度进行结构。"
tpl["style"] = "导读话语风格。模仿以下段落风格:年度热词“Citywalk”是一种“慢半拍”“随心悟”的新型旅游形式，更是一场城市文化、自然风光的浪漫“走读”。在此单元中，我们将跟随名家的脚步，来一场心灵的漫步，走一趟记忆的旅程：一同看那风光迷人的蒙古大草原，欣赏那幽雅妩媚的丁香花，感受那四时不同的西湖美景、田园风光；一起幻化为大自然的一花一叶，深入触摸山川湖海的心弦，解锁大自然的奥秘！"
tpl["tone"] = "文本连贯自然，生动且吸引读者。"
tpl["audience"] = "小学六年级的学生。"
tpl["response"] = "增加小学生对这些文章的阅读兴趣，同时从整体把握这些文章的内容。"
tpl["example"] = '''结合课文对大主题和大情境分析：年度热词“Citywalk”是一种“慢半拍”“随心悟”的新型旅游形式，更是一场城市文化、自然风光的浪漫“走读”。在此单元中，我们将跟随名家的脚步，来一场心灵的漫步，走一趟记忆的旅程：一同看那风光迷人的蒙古大草原，欣赏那幽雅妩媚的丁香花，感受那四时不同的西湖美景、田园风光；一起幻化为大自然的一花一叶，深入触摸山川湖海的心弦，解锁大自然的奥秘！

'''

tpl["request"] = "情境是：{selected_case}"
pr.add("课程计划是" + "{plan}")
pr.add("课文内容是：" + "{selected_analysed_text_set}")
tpl["format"] = "返回字符串，一段话。不要有任何其他的排版。"
intro_writer_prompt = tpl.compile()

'''
CaseEdit
'''
tpl = PromptTemplate()
tpl["context"] = "我是一名小学语文教师，需要你帮忙完成语文‘跨学科作业设计’相关的工作。\
这项工作的内容是：结合提供的情境或主题，将固定的单元课文或其它部分（如，习作部分）的内容串联起来，\
一定要保证紧扣大主题、大情境贯穿整个单元，其他内容可以自由地有创意地创作。"
tpl["objective"] = "重新分析并改进之前对主题的分析结果，依据用户反馈提供更详细、更符合用户需求的分析，或是回答用户的问题。"
tpl["original content"] = "作者在课文集中选择合适的结合课文(3-5篇)，发散思维，创造性地逐步分析和解读情境，为教师创造性地提供结合点。"
tpl["style"] = "详细、清晰、有条理，更加符合用户的反馈需求"
tpl["audience"] = "小学六年级的学生。"
tpl["response"] = '''
先前对主题的分析内容：{analysed_case}

用户提出的反馈或建议，或是用户提出的问题：{advice}
'''
ta.add("以下是选定的单元课文，你不能分析超过我提供的课文范围外的任何课文：{text_set}")
tpl["request"] = "请根据用户反馈，提供新的详细的结果和见解，或是解答用户的问题。你的重点是在于详细地、逐步地解读和分析情境或主题，尽可能不要在分析中提及任何具体的课文标题和内容！字数要求：100字左右。"
tpl["format"] = "只返回一段话！不要尝试任何的排版，包括任何的markdown符号或者标题。"
case_edit_prompt = tpl.compile()

'''
TextEdit
'''
tpl = PromptTemplate()
tpl["context"] = "我是一名小学语文教师，需要你帮忙完成语文‘跨学科作业设计’相关的工作。\
这项工作的内容是：结合提供的情境或主题，将固定的单元课文或其它部分（如，习作部分）的内容串联起来，\
一定要保证紧扣大主题、大情境贯穿整个单元，其他内容可以自由地有创意地创作。"
tpl["objective"] = "重新分析并改进之前的结合指定场景对课文的分析结果，依据用户反馈提供更详细、更符合用户需求的分析。"
tpl["style"] = "详细、清晰、有条理，更加符合用户的反馈需求"
tpl["audience"] = "小学六年级的学生。"
tpl["response"] = '''
主题内容：{selected_case}

课文内容：{text_content}

用户提出的反馈或建议，或是用户提出的问题：{advice}
'''
tpl["request"] = "请根据用户反馈，重新分析并提供更详细的结果，或是解答用户的问题。你的重点是在于结合用户提出的反馈或建议详细地、逐步地结合主题内容分析课文。字数要求50字左右。如果用户有特殊要求，可以酌情删减。"
tpl["format"] = "只返回一段话！不要尝试任何的排版，包括任何的markdown符号或者标题。"
text_edit_prompt = tpl.compile()

'''
CaseAnalyseMoreSubject
'''
task_context = "我是一名小学语文教师，需要你帮忙完成语文阅读‘跨学科作业设计’相关的工作。\
这项工作的内容是：结合提供的情境或主题，将固定的单元课文或其它部分（如，习作部分）的内容串联起来，\
一定要保证紧扣大主题、大情境贯穿整个单元，其他内容可以自由地有创意地创作。"
ta = theme_agent = PromptTemplate()
ta["context"] = task_context
ta["objective"] = "下面，请你帮助我完成第一项工作：请你在课文集合中选择合适的结合课文(5-8篇)，从“{subject}”学科中找到合适的情境，并在跨学科作业设计的案例中借鉴具体的学科设计，发散思维，为教师创造性地提供跨学科切入点。不需提供指导学生的信息。"
ta["require"] = '''遵守以下规则：1. 你先要完整地阐述情境标题，这个情境来源于你对“{subject}”该学科以及课文的理解分析，找到和课文内容贴切的跨学科主题。尽可能的细化到某个知识点，而非宽泛的概念。如，“冰雪消融”是好的场景，而“自然界研究”则不是；“画一朵花”是好的场景，而“研究美术”则不是；
2. 结合的课文名称需要在第二行提及；尽可能不要在分析中提及任何具体的课文标题和内容！*注意！！！语文园地、习作、阅读链接等内容不要进行结合分析。
3. 你可以参考接下来的Template进行生成。这些Template是有经验的教师日常设计得到的，具有良好的参考价值。'''
ta["style"] = "写给小学教师的风格。"
ta["tone"] = "说服性的。"
ta["audience"] = "小学六年级语文老师。"
ta["response"] = "有逻辑地输出，详细地阐述场景的内涵。"
ta["length"] = "200字左右。"
ta["format"] = '''## 情境名称
## 相关课文1, 相关课文2, ..., 相关课文n
## 各学科的切入点(写成一段话)
'''
# ta["Template and Format Example"] = '{examples}'
ta.add("以下是可选课文，你不能选择超过我提供的课文范围外的任何课文：{text_set}")
ta["format"] = '''## 情境名称
## 相关课文1, 相关课文2, ..., 相关课文n
## 各学科的切入点(写成一段话)
'''
ta["Template and Format Example"] = '{examples}'
ta["format tips"] = "请严格按照Format要求以及Template and Format Example的样例格式来进行生成，不要包含其他额外的描述！如example所示，在对情境的具体分析中，并没有提到任何关于示例文章的内容。输出中不包含“情境名称”、“相关课文”这种文字。这只是我在format中给你提示的标记。"
ta["tips"] = "所有相关课文的标题必须是我为你提供了全文的课文的标题（序号后的标题），不能包含任何其他的文章！！！同时，你选择的课文必须要和场景强相关，场景越具体越好。请注意，你必须按照fortmat要求加上## ，这对我们排版很重要，请注意，对情境的具体分析开始前也要加上## "
# ta.add("现在已有这些主题，请你不要重复生成与这些主题相关的情境：{exist_case}")
case_analysis_prompt_more_subject = ta.compile()


'''
ActivityPlanner
'''

task_context = "我是一名小学语文教师，需要你帮忙完成语文阅读‘跨学科作业设计’相关的工作。\
这项工作的内容是：结合提供的情境或主题，将固定的单元课文或其它部分（如，习作部分）的内容串联起来，\
一定要保证紧扣大主题、大情境贯穿整个单元，其他内容可以自由地有创意地创作。"
ta = theme_agent = PromptTemplate()
ta["context"] = task_context
ta["objective"] = "我现在要为语文阅读‘跨学科作业设计’课程设计课程活动，对象是没有学过该课程的小学高年级学生，请你以以之前步骤生成的课程安排、引言为我制定若干课程活动。"
ta["require"] = "遵守以下规则：1.你先要完整地分析之前生成的课程安排、引言以及课文，不可凭空编造；2.课程目标一定要结合课程课段安排，一定要具体。3. 输出的内容要与融合的科目（如有）、选定的情境以及语文学科密切相关。"
ta["style"] = "写给小学教师的风格。"
ta["tone"] = "说服性的。"
ta["audience"] = "小学六年级语文老师。"
ta["response"] = "有逻辑地输出，严格按照既定的课程内容输出。"
ta["length"] = "提供8-10个可能的活动，每个活动有一些简短的介绍。"
ta["format"] = '''活动名1 活动介绍。
活动名2 活动介绍。
...
'''
ta["format example"] = '''
从视频中认识天狼星 播放天狼星的视频，让同学们猜猜哪个是天狼星。介绍星座大犬座，相传大犬是猎户座“猎人”的养犬。
制作海报 根据《只有一个地球》的内容，制作一张海报。
写诗：《地球的颂歌》 大家从课文中一定获得了很多启发，可以尝试创作一首短诗。
'''
ta["format tips"] = "请严格参考format example的格式，不要包含其他额外的描述！请注意，有几个活动，总计就有几行。不要单独地将分析和活动描述分成两部分输出。"
ta["tips"] = "不能包含任何除给定外的其他的文章！！！同样的，请你不能包含任何课文范围外的任何场景！！！ 输出的答案请尽量模仿课程安排案例！！！请注意，不用写“活动名”、“活动介绍”这几个字，那是模板的一部分。不需提供指导学生的信息！！！"
ta.add("以下是可选课文，你不能选择超过我提供的课文范围外的任何课文：{selected_analysed_text_set}")
ta.add("以下是情境描述：{selected_case}")
ta.add("以下是之前步骤生成的课程安排和引言:{plan} \n {intro}")
ta["format tips"] = "请严格参考format example的格式，不要包含其他额外的描述！请注意，有几个活动，总计就有几行。不要单独地将分析和活动描述分成两部分输出。活动名和介绍之间一定要有空格！！！这一点对我排版非常重要。同时，活动之间请换行。不要有任何额外的格式！！！"
activity_planner_prompt = ta.compile()













'''
学科的模板
'''
music_temp = '''## 动人的京剧音乐
## 京剧趣谈 亮相
## 通过京剧音乐的情境，可以引导学生从语文课文中领悟京剧表演中的语言艺术。在音乐学科中，教师可以播放京剧中的经典唱段，带领学生分析音乐的节奏、音调和情感表达方式。学生可以尝试跟唱或模仿京剧唱腔，从中体会音乐的独特魅力和与文字表达的紧密联系。通过跨学科结合，学生不仅能够理解京剧的音乐艺术，还能提升对语文作品中情感表达的理解力。
'''

art_temp1 = '''## 美丽的京剧脸谱
## 京剧趣谈 亮相
## 教师可以引导学生通过语文课文了解脸谱中蕴含的文化意义。在美术学科中，学生可以动手绘制京剧脸谱，探索不同颜色、图案与人物性格之间的关系。教师可以提供脸谱的相关图片作为参考，帮助学生理解并运用传统艺术的美学元素。在这一过程中，学生不仅能加深对语文课文中京剧内容的理解，还能通过艺术创作体验中华文化的独特魅力。
'''

art_temp2 = '''## 自然景观中的色彩与构图
## 古诗三首 爬山虎的脚 蟋蟀的住宅
## 教师可以引导学生通过语文课文中的描写，理解大自然中色彩与形态的美感。在美术学科中，学生可以通过绘画或制作手抄报，展现古诗中的意境或植物的形态特征，探讨色彩的运用与构图的技巧。通过跨学科结合，学生不仅能体会语文课文中的自然之美，还能通过艺术创作加深对自然景观的理解和表达。
'''

sci_temp1 = '''## 昆虫习性与环境适应
## 古诗三首 爬山虎的脚 蟋蟀的住宅
## 学生通过语文课文中对蟋蟀生活习性的描写，激发对昆虫世界的兴趣。在科学学科中，学生可以实际观察和记录蟋蟀或其他昆虫的行为，研究它们如何选择和改造栖息环境，以适应自然环境的变化。通过跨学科结合，学生不仅能掌握语文中的描写技巧，还能通过科学实践深入理解昆虫的生存智慧和与环境的互动关系。
'''

sci_temp2 = '''## 节气的科学原理与地域差异
## 立夏 二十四节气歌
## 在节气的科学原理与地域差异的情境下，教师可以通过语文课文和二十四节气歌的背诵，引导学生了解节气背后的科学依据，如地球的公转、季节变化等。在科学学科中，学生可以进一步探讨不同节气在中国南北方的表现差异，例如立夏时节南北方的气候特征与风俗习惯，分析这些差异背后的地理和气象原因。通过跨学科结合，学生不仅能掌握节气的科学原理，还能理解节气与生活的密切联系，培养科学探究能力。
'''

sci_temp3 = '''## 神奇的纳米技术
## 纳米技术就在我们身边
## 教师可以通过课文内容，引导学生理解纳米技术的科学原理以及其在日常生活中的应用。在科学学科中，学生可以通过查阅资料和小组合作，了解纳米技术在医疗、材料、环保等领域的最新应用，并想象未来的可能性。学生还可以以“产品经理”的身份，设计并介绍一种基于纳米技术的新产品，讨论其工作原理与应用场景。通过这种跨学科结合，学生不仅能掌握纳米技术的基本原理，还能提升他们的创新思维和科学素养。
'''

his_temp = '''## 他们的童年
## 曹冲称象
## 引导学生了解历史人物的童年故事及其智慧表现，如曹冲称象、王冕七岁苦读忘牛、孔融四岁让梨等。在历史学科中，学生可以查阅相关历史资料，梳理这些人物在少年时期的故事，并通过绘画或连环画的形式，创作历史人物童年故事的图解。学生还可以为这些图解配上自己的解说词，进一步加深对这些历史人物的理解，并培养对历史文化的兴趣。
'''

math_temp1 = '''## 等量关系与分量累加的数学应用
## 曹冲称象
## 教师可以通过曹冲称象的故事，引导学生理解数学中的“等量的等量相等”和“分量+分量=总量”的概念。在数学学科中，学生可以通过类似于船的排水量实验，实践并验证这些数学原理，例如用石块或其他物品模拟称象过程。通过跨学科的结合，学生不仅能理解历史故事中的数学智慧，还能通过实际操作进一步掌握数学概念，激发他们对数学问题的思考和应用能力。
'''

math_temp2 = '''## 纳米？超级小的尺度！
## 纳米技术就在我们身边
## 教师可以通过纳米技术的概念，引导学生理解数学中的数量级概念和极小数的运算。在数学学科中，学生可以计算并比较纳米与其他常见长度单位（如毫米、微米等）之间的关系，理解数量级的差异。通过小组合作，学生还可以利用查阅资料的方式，分析纳米技术在不同领域中的具体应用，计算相关的数值数据。通过这种跨学科结合，学生不仅能掌握数学中的数量级与极小数的概念，还能理解这些概念在纳米技术中的实际应用。
'''

art_temp = "例1：\n" + art_temp1 + "\n例2：\n" + art_temp2

sci_temp = "例1：\n" + sci_temp1 + "\n例2：\n" + sci_temp2 +  "\n例3：\n" + sci_temp3

math_temp = "例1：\n" + math_temp1 + "\n例2：\n" + math_temp2